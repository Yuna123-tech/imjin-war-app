<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì„ì§„ì™œë€ ì—­ì‚¬ íƒí—˜</title>
  <!-- Tailwind CSSì™€ ê°™ì€ ë””ìì¸ì„ ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Reactì™€ JSXë¥¼ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <!-- ì˜ˆìœ í•œê¸€ í°íŠ¸ -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
    body {
      font-family: 'Noto Sans KR', sans-serif;
    }
    /* ì¥êµ°ë‹˜ ìºë¦­í„°ê°€ ì‚´ì§ ì›€ì§ì´ëŠ” íš¨ê³¼ */
    .animate-float {
      animation: float 3s infinite ease-in-out;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    /* ê¸€ìê°€ íƒ€ì´í•‘ë˜ëŠ” íš¨ê³¼ë¥¼ ìœ„í•œ ê¹œë¹¡ì´ëŠ” ì»¤ì„œ */
    .typing-text::after {
        content: '|';
        animation: blink 1s step-end infinite;
    }
    @keyframes blink {
        from, to { color: transparent }
        50% { color: black; }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // ê¸€ìê°€ í•œ ê¸€ìì”© ë‚˜íƒ€ë‚˜ëŠ” íƒ€ì´í•‘ íš¨ê³¼ ì»´í¬ë„ŒíŠ¸
    const TypedText = ({ text, onComplete }) => {
      const [displayedText, setDisplayedText] = useState('');

      useEffect(() => {
        setDisplayedText(''); // í…ìŠ¤íŠ¸ê°€ ë°”ë€” ë•Œë§ˆë‹¤ ì´ˆê¸°í™”
        let index = 0;
        const intervalId = setInterval(() => {
          if (index < text.length) {
            setDisplayedText(prev => prev + text[index]);
            index++;
          } else {
            clearInterval(intervalId);
            if (onComplete) onComplete();
          }
        }, 60); // íƒ€ì´í•‘ ì†ë„ (ms)

        return () => clearInterval(intervalId);
      }, [text, onComplete]);

      return <span className="typing-text">{displayedText}</span>;
    };

    function App() {
      const [scene, setScene] = useState(0); // 0: ì‹œì‘, 1: ë¶ˆí˜¸ë ¹, 2: ë©´ë‹´, 3: ì •ì„¸ íŒŒì•…
      const [loading, setLoading] = useState(false);
      const [geoInfo, setGeoInfo] = useState({ japan: '', ming: '' });
      const [isTypingComplete, setIsTypingComplete] = useState(true);

      // ì¥ë©´ì´ ë°”ë€” ë•Œë§ˆë‹¤ íƒ€ì´í•‘ ìƒíƒœ ì´ˆê¸°í™”
      useEffect(() => {
        setIsTypingComplete(false);
      }, [scene]);

      // Gemini API í˜¸ì¶œ í•¨ìˆ˜ (ì´ ì½”ë“œì—ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ëŒ€ì²´)
      const getHistoricalContext = (country) => {
        setLoading(true);
        // ì‹¤ì œ API í˜¸ì¶œ ëŒ€ì‹ , ë¯¸ë¦¬ ì¤€ë¹„ëœ í…ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
        // GitHub Pagesì—ì„œëŠ” API í‚¤ ë³´ì•ˆ ë¬¸ì œë¡œ ì§ì ‘ í˜¸ì¶œì´ ì–´ë µê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
        setTimeout(() => {
            let infoText = '';
            if (country === 'ì¼ë³¸') {
                infoText = 'ë‹¹ì‹œ ì¼ë³¸ì€ ì˜¤ëœ ì „ìŸìœ¼ë¡œ í˜¼ë€ìŠ¤ëŸ¬ì› ì§€ë§Œ, \'ë„ìš”í† ë¯¸ íˆë°ìš”ì‹œ\'ë¼ëŠ” ì¸ë¬¼ì´ ì¼ë³¸ ì „ì²´ë¥¼ í†µì¼í–ˆì–´ìš”. ê·¸ëŠ” ê°•ë ¥í•œ êµ°ëŒ€ë¥¼ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ë³´ë‚´ê³  ì‹¶ì–´ í–ˆê³ , ê·¸ ëª©í‘œê°€ ë°”ë¡œ ì¡°ì„ ê³¼ ëª…ë‚˜ë¼ì˜€ë‹µë‹ˆë‹¤.';
            } else {
                infoText = 'ëª…ë‚˜ë¼ëŠ” ì•„ì£¼ í¬ê³  í˜ì„¼ ë‚˜ë¼ì˜€ì§€ë§Œ, ì•ˆì—ì„œëŠ” í˜ê²¨ë£¨ê¸°ì™€ ì‚¬ì¹˜ë¡œ ì¡°ê¸ˆì”© ì•½í•´ì§€ê³  ìˆì—ˆì–´ìš”. íŠ¹íˆ ë¶ìª½ì˜ ë‹¤ë¥¸ ë¯¼ì¡±ë“¤ê³¼ì˜ ë‹¤íˆ¼ ë•Œë¬¸ì— êµ­ë°©ì— ë§ì€ ì‹ ê²½ì„ ì“°ê³  ìˆì—ˆë‹µë‹ˆë‹¤.';
            }
            setGeoInfo(prev => ({ ...prev, [country === 'ì¼ë³¸' ? 'japan' : 'ming']: infoText }));
            setLoading(false);
        }, 1500); // 1.5ì´ˆ í›„ ì •ë³´ë¥¼ ë³´ì—¬ì¤˜ì„œ ë¡œë”©í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ê²Œ í•¨
      };
      
      // í™”ë©´ì„ ê·¸ë¦¬ëŠ” í•¨ìˆ˜
      const renderScene = () => {
        // ì´ìˆœì‹  ì¥êµ°ë‹˜ ìºë¦­í„° ì´ë¯¸ì§€ (ì›¹ì— ì—…ë¡œë“œëœ ì£¼ì†Œ)
        const admiralImage = "https://i.ibb.co/h7gW6Yg/yi-sun-sin-and-ship.png";
        // ê±°ë¶ì„  ì´ë¯¸ì§€
        const turtleShipImage = "https://i.ibb.co/L92bN0T/yi-sun-sin-detailed.jpg";

        switch (scene) {
          // --- 0. ì‹œì‘ í™”ë©´ ---
          case 0:
            return (
              <div className="bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl p-8 max-w-2xl mx-auto text-center border-4 border-slate-400">
                <img src={turtleShipImage} alt="ê±°ë¶ì„ ê³¼ ì´ìˆœì‹  ì¥êµ°" className="w-full max-w-md mx-auto rounded-lg mb-6"/>
                <h1 className="text-4xl font-bold text-slate-800 mb-4">ğŸ“– ì„ì§„ì™œë€ ì—­ì‚¬ ì†ìœ¼ë¡œ!</h1>
                <p className="text-lg text-gray-700 mb-8">
                  ì±…ì„ í¼ì¹˜ë‹ˆ, ìš°ë¦¬ëŠ” ì–´ëŠìƒˆ ì—­ì‚¬ì˜ í•œê°€ìš´ë°ì— ì„œ ìˆìŠµë‹ˆë‹¤. <br/>ì–´ë–¤ ì´ì•¼ê¸°ê°€ ìš°ë¦¬ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì„ê¹Œìš”?
                </p>
                <button
                  onClick={() => setScene(1)}
                  className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform transform hover:scale-105 active:scale-95 text-lg"
                >
                  í›ˆë ¨ì¥ìœ¼ë¡œ ì´ë™í•˜ê¸°
                </button>
              </div>
            );
          
          // --- 1. ë¶ˆí˜¸ë ¹ ì¥ë©´ ---
          case 1:
            return (
              <div className="bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl p-8 max-w-2xl mx-auto text-center border-4 border-red-400">
                <img src={admiralImage} alt="í™”ë‚œ ì´ìˆœì‹  ì¥êµ°" className="w-48 h-48 mx-auto mb-4 animate-float" />
                <div className="bg-gray-100 p-6 rounded-lg min-h-[120px] flex items-center justify-center">
                  <p className="text-xl text-gray-800 font-semibold leading-relaxed">
                    <TypedText
                      text="ì›¬ ë†ˆë“¤ì´ëƒ! ëŒ€ì—´ë„ ë§ì¶”ì§€ ëª»í•˜ê³ ! ì •ì‹  ë°”ì§ ì°¨ë¦¬ì§€ ëª»í• ê¹Œ!"
                      onComplete={() => setIsTypingComplete(true)}
                    />
                  </p>
                </div>
                {isTypingComplete && (
                  <button
                    onClick={() => setScene(2)}
                    className="mt-8 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform transform hover:scale-105 active:scale-95 text-lg animate-bounce"
                  >
                    (ì•—, í˜¼ë‚¬ë‹¤...) ë©´ë‹´í•˜ëŸ¬ ê°€ê¸°
                  </button>
                )}
              </div>
            );

          // --- 2. ê°œë³„ ë©´ë‹´ ì¥ë©´ ---
          case 2:
            return (
              <div className="bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl p-8 max-w-2xl mx-auto text-center border-4 border-green-400">
                <img src={admiralImage} alt="ì§„ì§€í•œ ì´ìˆœì‹  ì¥êµ°" className="w-48 h-48 mx-auto mb-4 animate-float" />
                <div className="bg-gray-100 p-6 rounded-lg min-h-[150px] flex items-center justify-center">
                    <p className="text-xl text-gray-800 font-semibold leading-relaxed">
                        <TypedText
                            text="ë¯¸ì•ˆí•˜êµ¬ë‚˜. ë„ˆë¬´ ë†€ëì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ì§€ê¸ˆì€ ì •ì‹ ì„ ë°”ì§ ì°¨ë ¤ì•¼ í•  ë•Œë‹¤. ìš°ë¦¬ë¥¼ ë‘˜ëŸ¬ì‹¼ ì¼ë³¸ê³¼ ëª…ë‚˜ë¼ì˜ ìƒí™©ì„ ì•Œì•„ë³´ê³  ë‚´ê²Œ ë³´ê³ í•´ì£¼ê² ëŠëƒ?"
                            onComplete={() => setIsTypingComplete(true)}
                        />
                    </p>
                </div>
                {isTypingComplete && (
                  <button
                    onClick={() => setScene(3)}
                    className="mt-8 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform transform hover:scale-105 active:scale-95 text-lg"
                  >
                    ë„¤, ì¥êµ°ë‹˜!
                  </button>
                )}
              </div>
            );

          // --- 3. ì •ì„¸ íŒŒì•… ì¥ë©´ ---
          case 3:
            return (
              <div className="bg-white/80 backdrop-blur-sm rounded-2xl shadow-2xl p-8 max-w-4xl mx-auto border-4 border-purple-400">
                <h2 className="text-3xl font-bold text-purple-800 mb-6 text-center">ì£¼ë³€ ì •ì„¸ íŒŒì•…í•˜ê¸°</h2>
                <p className="text-lg text-gray-700 mb-8 text-center">
                  ì¥êµ°ë‹˜ì˜ ëª…ì´ë‹¤! ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê° ë‚˜ë¼ì˜ ìƒí™©ì„ ì•Œì•„ë³´ì.
                </p>
                <div className="flex flex-col md:flex-row gap-6 mb-8 justify-center">
                  <button onClick={() => getHistoricalContext('ì¼ë³¸')} className="flex-1 bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-transform transform hover:scale-105" disabled={loading}>
                    {loading && !geoInfo.japan ? 'ì¡°ì‚¬ ì¤‘...' : 'ğŸ‡¯ğŸ‡µ ì¼ë³¸ ìƒí™© ì•Œì•„ë³´ê¸°'}
                  </button>
                  <button onClick={() => getHistoricalContext('ëª…ë‚˜ë¼')} className="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition-transform transform hover:scale-105" disabled={loading}>
                    {loading && !geoInfo.ming ? 'ì¡°ì‚¬ ì¤‘...' : 'ğŸ‡¨ğŸ‡³ ëª…ë‚˜ë¼ ìƒí™© ì•Œì•„ë³´ê¸°'}
                  </button>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div className="bg-red-50 p-6 rounded-xl shadow-inner border border-red-200">
                    <h3 className="text-2xl font-bold text-red-800 mb-4">ğŸ‡¯ğŸ‡µ ì¼ë³¸ì˜ ìƒí™©</h3>
                    <p className="text-gray-700 leading-relaxed text-base min-h-[150px]">{geoInfo.japan || 'ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¡°ì‚¬í•´ì£¼ì„¸ìš”.'}</p>
                  </div>
                  <div className="bg-blue-50 p-6 rounded-xl shadow-inner border border-blue-200">
                    <h3 className="text-2xl font-bold text-blue-800 mb-4">ğŸ‡¨ğŸ‡³ ëª…ë‚˜ë¼ì˜ ìƒí™©</h3>
                    <p className="text-gray-700 leading-relaxed text-base min-h-[150px]">{geoInfo.ming || 'ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¡°ì‚¬í•´ì£¼ì„¸ìš”.'}</p>
                  </div>
                </div>

                <div className="text-center mt-8">
                  <button onClick={() => { setScene(0); setGeoInfo({japan:'', ming:''}); }} className="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-5 rounded-full shadow-md transition-transform transform hover:scale-105">
                    ì²˜ìŒìœ¼ë¡œ
                  </button>
                </div>
              </div>
            );
          default:
            return null;
        }
      };

      return (
        <div className="min-h-screen bg-cover bg-center bg-fixed" style={{backgroundImage: "url('https://cdn.pixabay.com/photo/2017/02/15/11/29/painting-2068211_1280.jpg')"}}>
            <div className="min-h-screen flex items-center justify-center p-4">
                {renderScene()}
            </div>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
